"use strict";(self["webpackChunkDTX_MEDI_PLATFORM"]=self["webpackChunkDTX_MEDI_PLATFORM"]||[]).push([[247],{43247:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var s=function(){var e=this,t=e._self._c;return t("main",{staticClass:"function__management__main"},[t("MenuAddPopup",{attrs:{popupEventFlag:e.popupEventFlag,popupState:e.popupState,selectedObj:e.selectedRowObj,menuList:e.getMenuList},on:{popupClose:e.popupToggle,refreshList:e.getMenus}}),t("section",{staticClass:"box__shadow__01 vertical__scroll grid__wrap"},[t("h3",{staticClass:"page__title"},[e._v(" "+e._s(this.$store.state.pageInfo["메뉴 관리"].title)+" ")]),t("h5",{staticClass:"page__sub__title f__regular"},[e._v(" "+e._s(this.$store.state.pageInfo["메뉴 관리"].subTitle)+" ")]),t("div",{staticClass:"add__or__search__wrap"},[t("ul",[t("li",[t("dl",[t("dt",[e._v("상위메뉴")]),t("dd",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.menuHighIdFilter,expression:"menuHighIdFilter"}],attrs:{name:"",id:""},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.menuHighIdFilter=t.target.multiple?n:n[0]},e.gridDataFiltering]}},[t("option",{attrs:{value:""}},[e._v("전체")]),e._l(e.menuList,(function(n){return t("option",{key:n.index,domProps:{value:n.menuId}},[e._v(" "+e._s(n.menuNm)+" ")])}))],2)])])]),t("li",[t("dl",[t("dt",[e._v("사용여부")]),t("dd",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.useYnFilter,expression:"useYnFilter"}],ref:"useYnSelector",attrs:{name:"",id:""},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.useYnFilter=t.target.multiple?n:n[0]},e.gridDataFiltering]}},[t("option",{attrs:{value:""}},[e._v("전체")]),t("option",{attrs:{value:"사용"}},[e._v("사용")]),t("option",{attrs:{value:"미사용"}},[e._v("미사용")])])])])])]),t("button",{staticClass:"custom__btn",on:{click:function(t){return e.popupToggle("추가")}}},[e._m(0),t("p",[e._v("메뉴 추가")])])]),t("div",{staticClass:"grid__wrap",on:{click:function(t){return e.rowClick(t)}}},[t("Grid",{ref:"gridEl",staticClass:"on",attrs:{cols:e.cols,pagination:!0,sort:!0,rows:e.filteredGridData}})],1)])],1)},i=[function(){var e=this,t=e._self._c;return t("span",[t("img",{attrs:{src:n(69067),alt:"추가 아이콘"}})])}],a=n(28861),u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"popup__wrap",class:{on:"Open"===e.popupEventFlag}},[t("div",{staticClass:"popup__bg"}),t("div",{staticClass:"common__popup box__shadow__02"},[t("div",{staticClass:"popup__top"},[t("h4",[e._v("메뉴 "+e._s(e.popupState))]),t("button",{staticClass:"pop__close__btn",on:{click:e.popupCloseClick}})]),t("ul",[t("li",{directives:[{name:"show",rawName:"v-show",value:"수정"===e.popupState,expression:"popupState === '수정'"}]},[t("dl",[t("dt",{staticClass:"f__medium"},[e._v("메뉴ID")]),t("dd",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.reqMenu.menuId,expression:"reqMenu.menuId"}],staticClass:"custom__input",attrs:{type:"text",disabled:"수정"===e.popupState},domProps:{value:e.reqMenu.menuId},on:{input:function(t){t.target.composing||e.$set(e.reqMenu,"menuId",t.target.value)}}})])])]),t("li",[t("dl",[t("dt",{staticClass:"f__medium"},[e._v("메뉴명")]),t("dd",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.reqMenu.menuNm,expression:"reqMenu.menuNm"}],staticClass:"custom__input",attrs:{type:"text"},domProps:{value:e.reqMenu.menuNm},on:{input:function(t){t.target.composing||e.$set(e.reqMenu,"menuNm",t.target.value)}}})])])]),t("li",[t("dl",[t("dt",{staticClass:"f__medium"},[e._v("상위메뉴")]),t("dd",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.reqMenu.menuHighId,expression:"reqMenu.menuHighId"}],attrs:{name:"",id:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.reqMenu,"menuHighId",t.target.multiple?n:n[0])}}},[t("option",{attrs:{value:""}},[e._v("상위메뉴없음")]),e._l(e.menuList,(function(n){return t("option",{key:n.index,domProps:{value:n.menuId}},[e._v(" "+e._s(n.menuNm)+" ")])}))],2)])])]),t("li",[t("dl",[t("dt",{staticClass:"f__medium"},[e._v("링크")]),t("dd",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.reqMenu.link,expression:"reqMenu.link"}],staticClass:"custom__input",attrs:{type:"text"},domProps:{value:e.reqMenu.link},on:{input:function(t){t.target.composing||e.$set(e.reqMenu,"link",t.target.value)}}})])])]),t("li",[t("dl",[t("dt",{staticClass:"f__medium"},[e._v("기능매칭")]),t("dd",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.reqMenu.funcId,expression:"reqMenu.funcId"}],attrs:{name:"",id:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.reqMenu,"funcId",t.target.multiple?n:n[0])}}},[t("option",{attrs:{value:""}},[e._v("선택")]),e._l(e.allFunctionList,(function(n){return t("option",{key:n.index,domProps:{value:n.funcId}},[e._v(" "+e._s(n.funcNm)+" ")])}))],2)])])]),t("li",[t("dl",[t("dt",{staticClass:"f__medium"},[e._v("사용여부")]),t("dd",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.reqMenu.useYn,expression:"reqMenu.useYn"}],attrs:{name:"",id:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.reqMenu,"useYn",t.target.multiple?n:n[0])}}},[t("option",{attrs:{value:""}},[e._v("선택")]),t("option",{attrs:{value:"Y"}},[e._v("사용")]),t("option",{attrs:{value:"N"}},[e._v("미사용")])])])])])]),t("div",{staticClass:"custom__btn__wrap"},[t("button",{staticClass:"custom__btn delete",on:{click:e.removeOrClean}},[e._m(0),t("p",[e._v("삭제")])]),t("button",{staticClass:"custom__btn",on:{click:e.addMenu}},[e._m(1),t("p",[e._v("저장")])])])])])},r=[function(){var e=this,t=e._self._c;return t("span",[t("img",{attrs:{src:n(99685),alt:"저장 아이콘"}})])},function(){var e=this,t=e._self._c;return t("span",[t("img",{attrs:{src:n(99685),alt:"저장 아이콘"}})])}],o=n(7981),l=n(10565),p=n(43578),d={props:{popupEventFlag:String,popupState:String,selectedObj:[Object,Boolean],menuList:Array},data(){return{reqMenu:{menuHighId:"",menuNm:"",menuId:"",link:"",funcId:"",useYn:"Y"},allFunctionList:[]}},created(){(0,l.lf)().then((e=>{this.allFunctionList=e.data.response.data}))},watch:{popupState(){"수정"===this.popupState?(this.reqMenu=this.selectedObj,"사용"===this.selectedObj.useYn?this.reqMenu.useYn="Y":this.reqMenu.useYn="N"):"추가"===this.popupState&&(0,p.ZH)(this.reqMenu)}},methods:{popupCloseClick(){this.$emit("popupClose","Close")},addMenu(){this.validateMenu()&&("development"==this.$env&&console.log(this.reqMenu),"수정"===this.popupState?(0,o._8)(this.reqMenu).then((e=>{"OK"===e.data.status&&(this.$toast.success("메뉴 수정이 완료되었습니다"),this.popupCloseClick(),this.$emit("refreshList"))})).catch((e=>this.$toast.error(e.message))):(0,o.bL)(this.reqMenu).then((e=>{"development"==this.$env&&console.log(e),"OK"===e.data.status&&(this.$toast.success("메뉴 추가가 완료되었습니다"),this.popupCloseClick(),this.$emit("refreshList"))})).catch((e=>this.$toast.error(e.message))))},validateMenu(){return""===this.reqMenu.menuNm||null===this.reqMenu.menuNm?(this.$toast.error("메뉴 명을 입력하세요."),!1):""===this.reqMenu.funcId||null===this.reqMenu.basePafuncIdth?(this.$toast.error("매칭기능을 입력하세요."),!1):""!==this.reqMenu.useYn&&null!==this.reqMenu.useYn||(this.$toast.error("사용여부를 입력하세요."),!1)},removeOrClean(){"수정"===this.popupState?(0,o.n_)(this.reqMenu.menuId).then((e=>{"development"==this.$env&&console.log(e),"OK"===e.data.status&&(this.$toast.success("메뉴가 삭제되었습니다"),this.popupCloseClick(),this.$emit("refreshList"))})).catch((e=>this.$toast.error(e.message))):"추가"===this.popupState&&this.clear()},clear(){(0,p.ZH)(this.reqMenu)}}},c=d,m=n(1001),h=(0,m.Z)(c,u,r,!1,null,null,null),_=h.exports,v={components:{Grid:a.rj,MenuAddPopup:_},data(){return{popupEventFlag:"Close",cols:[{name:"번호",id:"index"},{name:"상위메뉴",id:"menuHighNm"},{name:"메뉴명",id:"menuNm"},{name:"메뉴ID",id:"menuId"},{name:"링크",id:"link"},{name:"기능",id:"funcNm"},{name:"상태",id:"useYn"},{name:"등록자명",id:"registerName"},{name:"변경일시",id:"updateDate"}],menuList:[],allMenuList:[],menuHighIdFilter:"",useYnFilter:"사용",selectedRowObj:"",popupState:"",filteredGridDataBack:[],filteredGridData:[]}},computed:{getMenuList(){return this.menuList}},mounted(){this.getMenus()},methods:{popupToggle(e){"추가"===e&&(this.selectedRowObj=!1),this.popupState=e,"Close"===this.popupEventFlag?this.popupEventFlag="Open":this.popupEventFlag="Close"},rowClick(e){const t=Number(e.path[1].childNodes[0].textContent),n=e.path[0].getAttribute("data-column-id");"menuId"===n&&this.popupToggle("수정"),this.selectedRowObj={...this.menuList[t-1]},"development"==this.$env&&console.log(this.menuList),"development"==this.$env&&console.log(this.selectedRowObj)},getMenus(){(0,o.Af)().then((e=>{this.menuList=e.data.response.data,this.menuList=this.menuList.filter((e=>"앱 로그 조회"!==e.funcNm)),this.menuList.forEach((function(e,t){e.index=t+1,"Y"===e.useYn?e.useYn="사용":e.useYn="미사용"})),this.filteredGridDataBack=this.menuList,""===this.menuHighIdFilter&&"사용"===this.useYnFilter?(this.filteredGridData=this.menuList,this.filteredGridData=this.filteredGridData.filter((e=>"사용"===e.useYn.trim()))):this.gridDataFiltering()}))},gridDataFiltering(){this.filteredGridData=this.filteredGridDataBack,""!==this.menuHighIdFilter&&(this.filteredGridData=this.filteredGridData.filter((e=>e.menuHighId.trim()===this.menuHighIdFilter))),""!==this.useYnFilter&&(this.filteredGridData=this.filteredGridData.filter((e=>e.useYn.trim()===this.useYnFilter)))}}},f=v,g=(0,m.Z)(f,s,i,!1,null,null,null),M=g.exports},10565:function(e,t,n){n.d(t,{Pf:function(){return u},UA:function(){return a},Uc:function(){return r},lf:function(){return i}});var s=n(18701);function i(e){return e?(0,s.U2)(`/functions?${e}`):(0,s.U2)("/functions")}function a(e){return(0,s.Ue)("/functions",e)}function u(e){return(0,s.Vx)(`/functions/${e.funcId}`,e)}function r(e){return(0,s.Od)(`/functions/${e}`)}},69067:function(e,t,n){e.exports=n.p+"img/ic-plus.699e4fe1.svg"}}]);
//# sourceMappingURL=247.64159397.js.map
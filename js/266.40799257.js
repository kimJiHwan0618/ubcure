"use strict";(self["webpackChunkDTX_MEDI_PLATFORM"]=self["webpackChunkDTX_MEDI_PLATFORM"]||[]).push([[266],{8266:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});var r=function(){var e=this,t=e._self._c;return t("main",{staticClass:"add__treatment__main"},[t("TreatmentSave",{attrs:{dragTreatmentItem:e.dragTreatmentItem,digitalMedicineList:e.medicineList},on:{changeCategoryBySubject:e.changeCategoryBySubject}}),t("TreatmentAdd",{attrs:{digitalMedicineList:e.medicineList,selectedSubjectId:e.selectedSubjectId},on:{treatmentStartDrag:e.treatmentStartDrag}})],1)},s=[],i=function(){var e=this,t=e._self._c;return t("section",{staticClass:"save__treatment__wrap box__shadow__01 vertical__scroll"},[t("h3",[e._v("치료제 저장")]),t("ul",{staticClass:"select__wrap"},[t("li",[t("dl",[t("dt",[e._v("과목선택")]),t("dd",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.reqTreatmentInfo.subjectId,expression:"reqTreatmentInfo.subjectId"}],attrs:{name:"",id:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.reqTreatmentInfo,"subjectId",t.target.multiple?a:a[0])},e.changeCategoryBySubject]}},[t("option",{attrs:{value:""}},[e._v("과목 전체")]),e._l(e.treatmentSubjectList,(function(a){return t("option",{key:a.index,domProps:{value:a.codeId}},[e._v(" "+e._s(a.codeName)+" ")])}))],2)])])]),t("li",[t("dl",[t("dt",[e._v("카테고리")]),t("dd",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.reqTreatmentInfo.category,expression:"reqTreatmentInfo.category"}],attrs:{name:"",id:""},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.reqTreatmentInfo,"category",t.target.multiple?a:a[0])}}},[t("option",{attrs:{value:""}},[e._v("카테고리 전체")]),e._l(e.treatmentCategoryList,(function(a){return t("option",{key:a.index,domProps:{value:a.codeId}},[e._v(" "+e._s(a.codeName)+" ")])}))],2),e._e()])])]),t("li",[t("dl",[t("dt",[e._v("제목")]),t("dd",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.reqTreatmentInfo.name,expression:"reqTreatmentInfo.name"}],staticClass:"custom__input",attrs:{type:"text"},domProps:{value:e.reqTreatmentInfo.name},on:{input:function(t){t.target.composing||e.$set(e.reqTreatmentInfo,"name",t.target.value)}}})])])])]),t("div",{staticClass:"treatment__list__wrap"},[t("div",{staticClass:"title__wrap"},[t("p",[e._v("표시순서")]),t("button",{staticClass:"custom__btn delete",on:{click:e.deleteButtonClick}},[e._m(0),t("p",[e._v("비우기")])])]),t("div",{ref:"treatmentList",staticClass:"treatment__list",on:{dragover:function(t){return e.dragOver(t)},drop:function(t){return e.drop(t,"add")}}},e._l(e.treatmentSaveList,(function(a,r){return t("div",{key:a.seq,staticClass:"item box__shadow__03"},[t("div",{staticClass:"left"},[t("p",{staticClass:"num f__bold"},[e._v(e._s(r+1))]),t("span",{staticClass:"icon"},[t("img",{attrs:{src:a.typeImgSrc}})]),t("p",{staticClass:"title"},[e._v(e._s(a.body))])]),t("div",{staticClass:"right"},[t("dl",[t("dt",[e._v(e._s(a.category))]),t("dd",[e._v(e._s(a.title))])])])])})),0),t("div",{staticClass:"save__btn__wrap"},[t("button",{staticClass:"custom__btn",on:{click:e.addOrUpdateTreatment}},[e._m(1),t("p",[e._v("저장")])])])])])},n=[function(){var e=this,t=e._self._c;return t("span",[t("img",{attrs:{src:a(55483),alt:"삭제 아이콘"}})])},function(){var e=this,t=e._self._c;return t("span",[t("img",{attrs:{src:a(99685),alt:"저장 아이콘"}})])}],d=(a(57658),a(12481)),o=a(13442),c=JSON.parse('{"N":[{"codeName":"알콜중독 치료","codeId":"APP001","useYn":"Y","registerId":"SYSTEM","registerName":"시스템 관리자","createDate":"2022-03-21 11:01:30","updateId":"SYSTEM","updaterName":"시스템 관리자","updateDate":"2022-06-27 16:29:56","codeDesc":"UbiplusAStop","mainCommCode":"APP_DIV"}]}'),m=JSON.parse('{"N":[{"codeName":"동기면담","codeId":"TACA001","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 18:04:46","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 18:04:46","codeDesc":"A-Stop 치료제 카테고리","mainCommCode":"TACA"},{"codeName":"질환교육","codeId":"TACA002","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 18:05:31","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 23:53:31","codeDesc":"A-Stop 치료제 카테고리","mainCommCode":"TACA"},{"codeName":"기능분석","codeId":"TACA003","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 18:05:53","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 18:05:53","codeDesc":"A-Stop 치료제 카테고리","mainCommCode":"TACA"},{"codeName":"목표설정","codeId":"TACA004","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 18:06:12","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 18:06:12","codeDesc":"A-Stop 치료제 카테고리","mainCommCode":"TACA"},{"codeName":"행동활성화","codeId":"TACA005","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 18:06:29","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 18:06:29","codeDesc":"A-Stop 치료제 카테고리","mainCommCode":"TACA"},{"codeName":"인지치료","codeId":"TACA006","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 18:06:47","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 18:06:47","codeDesc":"A-Stop 치료제 카테고리","mainCommCode":"TACA"},{"codeName":"동기강화부스터","codeId":"TACA007","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 18:07:09","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 18:07:09","codeDesc":"A-Stop 치료제 카테고리","mainCommCode":"TACA"}]}'),u=JSON.parse('{"N":[{"codeName":"단일","codeId":"TMCA000","useYn":"Y","registerId":"SYSTEM","registerName":"시스템 관리자","createDate":"2022-07-21 06:07:01","updateId":"SYSTEM","updaterName":"시스템 관리자","updateDate":"2022-07-21 06:07:01","codeDesc":"M-Strong 치료제 카테고리","mainCommCode":"TMCA"}]}'),l=a(53451),g=a(81260),p={data(){return{contentAddFlag:!0,treatmentSaveList:[],treatmentSubjectList:[],treatmentCategoryList:[],reqTreatmentInfo:{subjectId:"",category:"",name:"",useYn:"Y"},isAddTreament:!0,medicineList:[],aStopTreatmentCategoryList:[],mStrongTreatmentCategoryList:[]}},props:{dragTreatmentItem:[Object,String],digitalMedicineList:Array},watch:{dragTreatmentItem(){},digitalMedicineList(){this.medicineList=this.digitalMedicineList}},computed:{treatmentManagement(){return this.$store.state.treatmentManagement}},mounted(){if(this.$route.query.id){this.isAddTreament=!1;const e=d;for(let t of e)t.id==this.$route.query.id&&(this.reqTreatmentInfo.subjectId=t.subjectId,this.changeCategoryBySubject(),this.reqTreatmentInfo=t,this.treatmentSaveList=t.digitalMedicine);this.treatmentSaveList.forEach((e=>{o.forEach((t=>{t.id==e.id&&(console.log("굿"),e.category=t.categoryName,e.title=t.typeName,e.seq=e.order,e.body=e.name,this.addIconByMedicineType(e))}))}))}},created(){this.getTreatmentSubjectList(),this.getAStopTreatmentCategoryList(),this.getMStrongTreatmentCategoryList()},methods:{addOrUpdateTreatment(){let e=[];this.treatmentSaveList.forEach(((t,a)=>{let r={};r.order=a+1,r.id=t.id,e.push(r)})),this.reqTreatmentInfo.digitalMedicine=e,this.validateTreatment()},deleteButtonClick(){this.treatmentSaveList=[]},dragOver(e){e.preventDefault()},drop(){if("development"==this.$env&&console.log(this.dragTreatmentItem),this.treatmentSaveList.map((e=>{e.body===this.dragTreatmentItem.body&&(this.contentAddFlag=!1)})),this.contentAddFlag){const e=this.dragTreatmentItem;this.addIconByMedicineType(e),this.treatmentSaveList.push(e)}else alert(`'${this.dragTreatmentItem.body}' 항목이 이미 존재합니다.`),this.contentAddFlag=!0},addIconByMedicineType(e){e.typeImgSrc=(0,l.Z)(e.title)},getTreatmentSubjectList(){this.treatmentSubjectList.push(c.N[0])},getAStopTreatmentCategoryList(){this.aStopTreatmentCategoryList=m.N},getMStrongTreatmentCategoryList(){this.mStrongTreatmentCategoryList=u.N},changeCategoryBySubject(){this.reqTreatmentInfo.category="","APP001"==this.reqTreatmentInfo.subjectId?this.treatmentCategoryList=this.aStopTreatmentCategoryList:"APP002"==this.reqTreatmentInfo.subjectId?this.treatmentCategoryList=this.mStrongTreatmentCategoryList:this.treatmentCategoryList=[],this.$emit("changeCategoryBySubject",this.reqTreatmentInfo.subjectId)},validateTreatment(){return(0,g.UE)(this.reqTreatmentInfo.subjectId)?(0,g.UE)(this.reqTreatmentInfo.category)?!!(0,g.UE)(this.reqTreatmentInfo.name)||(this.$toast.error("치료약 이름을 입력하세요."),!1):(this.$toast.error("카테고리를 선택하세요."),!1):(this.$toast.error("진료과목을 선택하세요."),!1)}}},h=p,_=a(1001),C=(0,_.Z)(h,i,n,!1,null,null,null),I=C.exports,v=function(){var e=this,t=e._self._c;return t("section",{staticClass:"add__treatment__wrap box__shadow__01 vertical__scroll"},[t("h3",[e._v("치료약 조회")]),t("div",{staticClass:"treatment__search__wrap"},[t("dl",[t("dt",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.searchCategoryId,expression:"searchCategoryId"}],ref:"categorySelector",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.searchCategoryId=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("카테고리 전체")]),e._l(e.treatmentCategoryList,(function(a){return t("option",{key:a.index,domProps:{value:a.codeId}},[e._v(" "+e._s(a.codeName)+" ")])}))],2)]),t("dd",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchMedicineName,expression:"searchMedicineName"}],ref:"medicineNameInput",staticClass:"custom__input",attrs:{type:"text",placeholder:"치료약 검색..."},domProps:{value:e.searchMedicineName},on:{input:function(t){t.target.composing||(e.searchMedicineName=t.target.value)}}})])]),t("button",{staticClass:"custom__btn",on:{click:e.medicineSearch}},[e._m(0),t("p",[e._v("검색")])])]),t("div",{staticClass:"treatment__list__wrap"},[e.medicineList.length>0?t("dl",{staticClass:"title__wrap"},[t("dt",[e._v("검색결과  :  ")]),t("dd",[e._v(e._s(e.medicineList.length))])]):e._e(),e.medicineList.length>0?t("ul",{staticClass:"treatment__list"},e._l(e.medicineList,(function(a){return t("li",{key:a.index,staticClass:"box__shadow__03"},[t("dl",{attrs:{draggable:"true","data-category":a.categoryName,"data-seq":a.index,"data-id":a.id},on:{dragstart:function(t){return e.startDrag(t)}}},[t("dt",[e._v(e._s(a.typeName))]),t("dd",{staticClass:"f__medium"},[e._v(e._s(a.name))])])])})),0):e._e()])])},f=[function(){var e=this,t=e._self._c;return t("span",[t("img",{attrs:{src:a(39615),alt:"검색 아이콘"}})])}],A=a(50722),y=JSON.parse('{"N":[{"codeName":"동기면담","codeId":"MACA001","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 17:42:47","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 17:42:47","codeDesc":"A-Stop 치료약 카테고리","mainCommCode":"MACA"},{"codeName":"질환교육","codeId":"MACA002","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 17:48:31","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 17:48:31","codeDesc":"A-Stop 치료약 카테고리","mainCommCode":"MACA"},{"codeName":"기능분석","codeId":"MACA003","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 17:49:31","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 17:49:31","codeDesc":"A-Stop 치료약 카테고리","mainCommCode":"MACA"},{"codeName":"목표설정","codeId":"MACA004","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 17:50:00","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 17:50:00","codeDesc":"A-Stop 치료약 카테고리","mainCommCode":"MACA"},{"codeName":"행동활성화","codeId":"MACA005","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 17:50:41","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 17:50:41","codeDesc":"A-Stop 치료약 카테고리","mainCommCode":"MACA"},{"codeName":"인지치료","codeId":"MACA006","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 17:51:11","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 17:51:11","codeDesc":"A-Stop 치료약 카테고리","mainCommCode":"MACA"},{"codeName":"동기강화부스터","codeId":"MACA007","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 17:51:44","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 17:51:44","codeDesc":"A-Stop 치료약 카테고리","mainCommCode":"MACA"}]}'),T={data(){return{itemObj:{},selectedType:"",searchedMedicineData:[],treatmentCategoryList:[],medicineList:[],searchCategoryId:"",searchMedicineName:""}},props:{selectedSubjectId:String},watch:{selectedSubjectId(){this.getTreatmentCategoryList(this.selectedSubjectId)}},created(){this.getTreatmentCategoryList()},computed:{treatmentManagement(){return this.$store.state.treatmentManagement}},methods:{startDrag(e){this.itemObj={},console.log(e),this.itemObj.title=e.srcElement.childNodes[0].textContent.trim(),this.itemObj.body=e.srcElement.childNodes[1].textContent.trim(),this.itemObj.category=e.srcElement.dataset.category,this.itemObj.seq=e.srcElement.dataset.seq,this.itemObj.id=e.srcElement.dataset.id,this.$emit("treatmentStartDrag",this.itemObj)},medicineSearch(){this.searchCategoryId=this.searchCategoryId.trim(),this.searchMedicineName=this.searchMedicineName.trim(),this.medicineList=o,this.medicineList.forEach(((e,t)=>{e.index=t+1}))},getTreatmentCategoryList(e){if("APP001"==e)this.treatmentCategoryList=y.N;else if("APP002"==e){let e="mainCommCode=MMCA&useYn=Y";(0,A.kP)(e).then((e=>{this.treatmentCategoryList=e.data.response.codeList}))}}}},N=T,b=(0,_.Z)(N,v,f,!1,null,null,null),S=b.exports,j={data(){return{dragTreatmentItem:{},medicineList:[],selectedSubjectId:""}},components:{TreatmentSave:I,TreatmentAdd:S},created(){this.getMedicines()},methods:{treatmentStartDrag(e){this.dragTreatmentItem=e},getMedicines(){this.medicineList=o.filter((e=>"N"!==e.useYn)),this.medicineList.forEach(((e,t)=>{e.index=t+1}))},changeCategoryBySubject(e){this.selectedSubjectId=e}}},D=j,L=(0,_.Z)(D,r,s,!1,null,null,null),k=L.exports},50722:function(e,t,a){a.d(t,{KJ:function(){return n},QX:function(){return i},jE:function(){return d},kP:function(){return s},uH:function(){return o}});var r=a(18701);function s(e){return e?(0,r.U2)(`/system/commonCode?${e}`):(0,r.U2)("/system/commonCode")}function i(){return(0,r.U2)("/system/classificationCode")}function n(e){return(0,r.Ue)("/system/commonCode",e)}function d(e){return(0,r.Vx)(`/system/commonCode/${e.codeId}`,e)}function o(e){return(0,r.Od)(`/system/commonCode/${e}`)}},53451:function(e,t,a){const r=e=>{let t="";switch(e){case"오디오":t=a(63097);break;case"동영상":t=a(70715);break;case"OX퀴즈":t=a(87836);break;case"워크시트":t=a(39767);break;case"단어회상":t=a(13419);break;case"걷기":t=a(18650);break;case"ADL":t=a(29570);break;case"주관식":t=a(87520);break;case"객관식":t=a(68607);break;case"스트레칭":t=a(413);break;default:break}return t};t["Z"]=r},29570:function(e,t,a){e.exports=a.p+"img/ic-adl.5bb932e3.svg"},63097:function(e,t,a){e.exports=a.p+"img/ic-audio.dad3d5c0.svg"},13419:function(e,t,a){e.exports=a.p+"img/ic-brains.26221670.svg"},68607:function(e,t,a){e.exports=a.p+"img/ic-multiplechoice.d671f381.svg"},87836:function(e,t,a){e.exports=a.p+"img/ic-ox.8ec1ca4b.svg"},413:function(e,t,a){e.exports=a.p+"img/ic-stretching.9a9b8e02.svg"},87520:function(e,t,a){e.exports=a.p+"img/ic-subjective.ea0ddbf8.svg"},70715:function(e,t,a){e.exports=a.p+"img/ic-video.68ac3c78.svg"},18650:function(e,t,a){e.exports=a.p+"img/ic-walking.b9bf7222.svg"},39767:function(e,t,a){e.exports=a.p+"img/ic-worksheet.c480d7b5.svg"}}]);
//# sourceMappingURL=266.40799257.js.map
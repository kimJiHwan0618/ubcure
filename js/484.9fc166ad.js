"use strict";(self["webpackChunkDTX_MEDI_PLATFORM"]=self["webpackChunkDTX_MEDI_PLATFORM"]||[]).push([[484],{91484:function(e,t,o){o.r(t),o.d(t,{default:function(){return f}});var s=function(){var e=this,t=e._self._c;return t("main",{staticClass:"commoncode__management__main"},[t("CommonCodePopup",{attrs:{mainCodeList:e.mainCodeList,popupEventFlag:e.popupEventFlag,popupState:e.popupState,selectedObj:e.selectedRowObj},on:{popupClose:e.popupToggle,refreshList:e.getCommonCodes}}),t("section",{staticClass:"box__shadow__01 vertical__scroll grid__wrap"},[t("h3",{staticClass:"page__title"},[e._v(" "+e._s(this.$store.state.pageInfo["공통코드 관리"].title)+" ")]),t("h5",{staticClass:"page__sub__title f__regular"},[e._v(" "+e._s(this.$store.state.pageInfo["공통코드 관리"].subTitle)+" ")]),t("div",{staticClass:"add__or__search__wrap"},[t("ul",[t("li",[t("dl",[t("dt",[e._v("분류코드")]),t("dd",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.mainCodeFilter,expression:"mainCodeFilter"}],ref:"mainCodeSelector",attrs:{name:"",id:""},on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.mainCodeFilter=t.target.multiple?o:o[0]},e.gridDataFiltering]}},[t("option",{attrs:{value:""}},[e._v("전체")]),e._l(e.mainCodeList,(function(o){return t("option",{key:o.index,domProps:{value:o.codeId}},[e._v(" "+e._s(o.codeName)+" ")])}))],2)])])]),t("li",[t("dl",[t("dt",[e._v("사용여부")]),t("dd",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.useYnFilter,expression:"useYnFilter"}],ref:"useYnSelector",attrs:{name:"",id:""},on:{change:[function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.useYnFilter=t.target.multiple?o:o[0]},e.gridDataFiltering]}},[t("option",{attrs:{value:""}},[e._v("전체")]),t("option",{attrs:{value:"사용"}},[e._v("사용")]),t("option",{attrs:{value:"미사용"}},[e._v("미사용")])])])])])]),t("button",{staticClass:"custom__btn",on:{click:function(t){return e.popupToggle("추가")}}},[e._m(0),t("p",[e._v("코드 추가")])])]),t("div",{staticClass:"grid__wrap",on:{click:function(t){return e.rowClick(t)}}},[t("Grid",{ref:"gridEl",staticClass:"on",attrs:{cols:e.cols,pagination:!0,sort:!0,rows:e.filteredGridData}})],1)])],1)},i=[function(){var e=this,t=e._self._c;return t("span",[t("img",{attrs:{src:o(69067),alt:"추가 아이콘"}})])}],a=o(28861),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"popup__wrap",class:{on:"Open"===e.popupEventFlag}},[t("div",{staticClass:"popup__bg"}),t("div",{staticClass:"common__popup box__shadow__02"},[t("div",{staticClass:"popup__top"},[t("h4",[e._v("코드 "+e._s(e.popupState))]),t("button",{staticClass:"pop__close__btn",on:{click:e.popupCloseClick}})]),t("ul",[t("li",[t("dl",[t("dt",{staticClass:"f__medium"},[e._v("분류코드명")]),t("dd",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.reqComCode.mainCommCode,expression:"reqComCode.mainCommCode"}],ref:"mainCodeSelector",attrs:{name:"",id:""},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.reqComCode,"mainCommCode",t.target.multiple?o:o[0])}}},[t("option",{attrs:{value:""}},[e._v("선택")]),e._l(e.mainCodeList,(function(o){return t("option",{key:o.index,domProps:{value:o.codeId}},[e._v(" "+e._s(o.codeName)+" ")])}))],2)])])]),t("li",[t("dl",[t("dt",{staticClass:"f__medium"},[e._v("코드ID")]),t("dd",[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.reqComCode.codeId,expression:"reqComCode.codeId",modifiers:{trim:!0}}],staticClass:"custom__input",attrs:{type:"text",disabled:"수정"===e.popupState},domProps:{value:e.reqComCode.codeId},on:{input:function(t){t.target.composing||e.$set(e.reqComCode,"codeId",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])])]),t("li",[t("dl",[t("dt",{staticClass:"f__medium"},[e._v("코드명")]),t("dd",[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.reqComCode.codeName,expression:"reqComCode.codeName",modifiers:{trim:!0}}],staticClass:"custom__input",attrs:{type:"text"},domProps:{value:e.reqComCode.codeName},on:{input:function(t){t.target.composing||e.$set(e.reqComCode,"codeName",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])])]),t("li",{staticClass:"question__input"},[t("dl",[t("dt",{staticClass:"f__medium"},[e._v("설명")]),t("dd",[t("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.reqComCode.codeDesc,expression:"reqComCode.codeDesc",modifiers:{trim:!0}}],staticClass:"custom__input",attrs:{name:"",id:""},domProps:{value:e.reqComCode.codeDesc},on:{input:function(t){t.target.composing||e.$set(e.reqComCode,"codeDesc",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])])]),t("li",[t("dl",[t("dt",{staticClass:"f__medium"},[e._v("사용여부")]),t("dd",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.reqComCode.useYn,expression:"reqComCode.useYn"}],ref:"useYnSelector",attrs:{name:"",id:""},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.reqComCode,"useYn",t.target.multiple?o:o[0])}}},[t("option",{attrs:{value:""}},[e._v("선택")]),t("option",{attrs:{value:"Y"}},[e._v("사용")]),t("option",{attrs:{value:"N"}},[e._v("미사용")])])])])])]),t("div",{staticClass:"custom__btn__wrap"},[t("button",{staticClass:"custom__btn delete",on:{click:e.removeOrClean}},[e._m(0),t("p",[e._v("삭제")])]),t("button",{staticClass:"custom__btn",on:{click:e.addCommCode}},[e._m(1),t("p",[e._v("저장")])])])])])},r=[function(){var e=this,t=e._self._c;return t("span",[t("img",{attrs:{src:o(55483),alt:"저장 아이콘"}})])},function(){var e=this,t=e._self._c;return t("span",[t("img",{attrs:{src:o(99685),alt:"저장 아이콘"}})])}],d=o(50722),l=o(43578),m={props:{popupEventFlag:String,mainCodeList:Array,popupState:String,selectedObj:[Object,Boolean]},data(){return{reqComCode:{mainCommCode:"",codeId:"",codeName:"",codeDesc:"",useYn:""}}},watch:{popupState(){"수정"===this.popupState?(this.reqComCode=this.selectedObj,"사용"===this.selectedObj.useYn?this.reqComCode.useYn="Y":this.reqComCode.useYn="N"):"추가"===this.popupState&&(0,l.ZH)(this.reqComCode)}},methods:{popupCloseClick(){this.$emit("popupClose","Close")},addCommCode(){this.validateComCode()&&("development"==this.$env&&console.log(this.reqComCode),"수정"===this.popupState?(0,d.jE)(this.reqComCode).then((e=>{"OK"===e.data.status&&(this.$toast.success("공통코드 수정이 완료되었습니다"),this.popupCloseClick(),this.$emit("refreshList"))})).catch((e=>this.$toast.error(e.message))):(0,d.KJ)(this.reqComCode).then((e=>{"development"==this.$env&&console.log(e),"OK"===e.data.status&&(this.$toast.success("공통코드 추가가 완료되었습니다"),this.popupCloseClick(),this.$emit("refreshList"))})).catch((e=>this.$toast.error(e.message))))},validateComCode(){return""===this.reqComCode.mainCommCode||null===this.reqComCode.mainCommCode?(this.$toast.error("분류코드명을 선택하세요."),!1):""===this.reqComCode.codeId||null===this.reqComCode.codeId?(this.$toast.error("코드 아이디를 입력하세요."),!1):""===this.reqComCode.codeName||null===this.reqComCode.codeName?(this.$toast.error("코드 명을 입력하세요."),!1):""!==this.reqComCode.useYn&&null!==this.reqComCode.useYn||(this.$toast.error("사용여부를 입력하세요."),!1)},removeOrClean(){"수정"===this.popupState?this.$confirm({title:"",message:"정말로 삭제 하시겠습니까?",button:{no:"아니오",yes:"네"},callback:e=>{e&&(0,d.uH)(this.reqComCode.codeId).then((e=>{"development"==this.$env&&console.log(e),"OK"===e.data.status&&(this.$toast.success("공통코드가 삭제되었습니다"),this.popupCloseClick(),this.$emit("refreshList"))})).catch((e=>this.$toast.error(e.message)))}}):"추가"===this.popupState&&(0,l.ZH)(this.reqComCode)}}},u=m,c=o(1001),p=(0,c.Z)(u,n,r,!1,null,null,null),C=p.exports,h={data(){return{popupEventFlag:"Close",popupState:"",selectedRowObj:"",cols:[{name:"번호",id:"index"},{name:"분류코드",id:"mainCommCode"},{name:"코드명",id:"codeName"},{name:"코드ID",id:"codeId"},{name:"상태",id:"useYn"},{name:"등록자명",id:"registerName"},{name:"변경일시",id:"modifyDate"}],commonCodeList:[],mainCodeList:[],mainCodeFilter:"",useYnFilter:"사용",filteredGridDataBack:[],filteredGridData:[]}},components:{Grid:a.rj,CommonCodePopup:C},computed:{getCommonCodeList(){return this.commonCodeList}},created(){this.getCommonCodes(),this.getMainCodes()},methods:{popupToggle(e){"추가"===e&&(this.selectedRowObj=!1),this.popupState=e,"Close"===this.popupEventFlag?this.popupEventFlag="Open":this.popupEventFlag="Close"},rowClick(e){const t=Number(e.path[1].childNodes[0].textContent),o=e.path[0].getAttribute("data-column-id");"codeId"===o&&this.popupToggle("수정"),this.selectedRowObj={...this.getCommonCodeList[t-1]}},getCommonCodes(){(0,d.kP)().then((e=>{this.commonCodeList=e.data.response.codeList,this.commonCodeList.forEach((function(e,t){e.index=t+1,"Y"===e.useYn?e.useYn="사용":e.useYn="미사용"})),this.filteredGridDataBack=this.commonCodeList,""===this.mainCodeFilter&&"사용"===this.useYnFilter?(this.filteredGridData=this.commonCodeList,this.filteredGridData=this.filteredGridData.filter((e=>"사용"===e.useYn.trim()))):this.gridDataFiltering()}))},getMainCodes(){(0,d.QX)().then((e=>{this.mainCodeList=e.data.response.classificationCodeList}))},searchCommCode(){let e="";""!==this.mainCodeFilter&&(e+="mainCommCode="+this.mainCodeFilter),""!==this.useYnFilter&&(e+="&useYn="+this.useYnFilter),(0,d.kP)(e).then((e=>{this.commonCodeList=e.data.response.codeList,this.commonCodeList.forEach((function(e,t){e.index=t+1,"Y"===e.useYn?e.useYn="사용":e.useYn="미사용"}))}))},gridDataFiltering(){this.filteredGridData=this.filteredGridDataBack,""!==this.mainCodeFilter&&(this.filteredGridData=this.filteredGridData.filter((e=>e.mainCommCode.trim()===this.mainCodeFilter))),""!==this.useYnFilter&&(this.filteredGridData=this.filteredGridData.filter((e=>e.useYn.trim()===this.useYnFilter)))}}},_=h,v=(0,c.Z)(_,s,i,!1,null,null,null),f=v.exports},50722:function(e,t,o){o.d(t,{KJ:function(){return n},QX:function(){return a},jE:function(){return r},kP:function(){return i},uH:function(){return d}});var s=o(18701);function i(e){return e?(0,s.U2)(`/system/commonCode?${e}`):(0,s.U2)("/system/commonCode")}function a(){return(0,s.U2)("/system/classificationCode")}function n(e){return(0,s.Ue)("/system/commonCode",e)}function r(e){return(0,s.Vx)(`/system/commonCode/${e.codeId}`,e)}function d(e){return(0,s.Od)(`/system/commonCode/${e}`)}},69067:function(e,t,o){e.exports=o.p+"img/ic-plus.699e4fe1.svg"},55483:function(e,t,o){e.exports=o.p+"img/ic-remove.adf1b0c3.svg"}}]);
//# sourceMappingURL=484.9fc166ad.js.map
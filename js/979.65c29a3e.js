"use strict";(self["webpackChunkDTX_MEDI_PLATFORM"]=self["webpackChunkDTX_MEDI_PLATFORM"]||[]).push([[979],{43979:function(e,t,a){a.r(t),a.d(t,{default:function(){return A}});var r=function(){var e=this,t=e._self._c;return t("main",{staticClass:"prescription"},[t("TemplateSavePopup",{attrs:{popupEventFlag:e.savePopFlag,popupState:e.popupState,prescriptionListByWeek:e.prescriptionListByWeek},on:{templateSavePopClose:e.templateSavePopClose}}),t("Prescription",{attrs:{dragRemedyItem:e.dragRemedyItem},on:{templateSavePopOpen:e.templateSavePopOpen}}),t("Remedy",{on:{remedyStartDrag:e.remedyStartDrag}})],1)},s=[],i=function(){var e=this,t=e._self._c;return t("section",{staticClass:"prescription__wrap box__shadow__01 vertical__scroll"},[t("div",{staticClass:"prescription__top"},[t("h3",{staticClass:"f__bold"},[e._v("처방전")]),t("ul",[t("li",[t("button",{staticClass:"custom__btn",on:{click:e.prescriptionTemSave}},[t("p",[e._v("템플릿 저장")])])])])]),t("div",{staticClass:"prescription__bottom"},e._l(e.prescriptionListByWeek,(function(a,r){return t("div",{key:r,staticClass:"week__list__item",attrs:{"data-index":r}},[t("div",{staticClass:"title__wrap"},[t("h4",{attrs:{"data-week":r}},[e._v(e._s(r+1)+"주차")]),t("button",{staticClass:"custom__btn delete small",on:{click:function(t){return e.cleanWeekData(r)}}},[e._m(0,!0),t("p",[e._v("비우기")])])]),t("ul",e._l(a.treatmentList,(function(a,s){return t("li",{key:s,staticClass:"box__shadow__03",attrs:{"data-index":s},on:{dragover:function(t){return e.dragOver(t)},drop:function(t){return e.drop(t,"add")},dblclick:function(t){return e.treatmentPreview(a.id,a.dayNum,r+1)}}},[""===a.id?t("p",{staticClass:"day__num"},[e._v(" "+e._s(s+1)+" ")]):e._e(),""!==typeof a.id?t("dl",{attrs:{draggable:"true"},on:{dragend:function(t){return e.removeDragEnd(t)},dragover:e.removeDragOver,dragleave:function(t){return e.removeDragStart(t)}}},[t("dt",[e._v(e._s(a.categoryName))]),t("dd",[e._v(e._s(a.name))])]):e._e()])})),0)])})),0)])},d=[function(){var e=this,t=e._self._c;return t("span",[t("img",{attrs:{src:a(55483),alt:"삭제 아이콘"}})])}],n={props:{dragRemedyItem:[Object,String]},watch:{dragRemedyItem(){this.dargItemAddFlag=!0}},data(){return{prescriptionListByWeek:[],dargItemAddFlag:!1}},methods:{drop(e){if(this.dargItemAddFlag){if(e.preventDefault(),"P"===e.srcElement.tagName){const t=Number(e.srcElement.parentNode.parentNode.parentNode.childNodes[0].childNodes[0].dataset.week),a=Number(e.srcElement.parentNode.dataset.index),r=this.prescriptionListByWeek[t].treatmentList[a];r.id=this.dragRemedyItem.id,r.categoryName=this.dragRemedyItem.categoryName,r.name=this.dragRemedyItem.name,r.dayNum=a}this.dargItemAddFlag=!1,this.treatmentPreviewFlag=!1}},removeDragOver(){this.dargItemRemoveFlag=!0},removeDragStart(){this.dargItemRemoveFlag=!1},removeDragEnd(e){if(!this.dargItemRemoveFlag){const t=Number(e.srcElement.parentNode.parentNode.parentNode.childNodes[0].childNodes[0].dataset.week),a=Number(e.srcElement.parentNode.dataset.index);this.prescriptionListByWeek[t].treatmentList.splice(a,1,{id:""})}this.treatmentPreviewFlag=!1},dragOver(e){e.preventDefault()},cleanWeekData(e){this.prescriptionListByWeek[e].treatmentList.map(((t,a)=>{this.prescriptionListByWeek[e].treatmentList.splice(a,1,{dayNum:1,id:"",preLearningWeekNum:null,preLearningDayNum:null,categoryName:"",name:""})})),this.treatmentPreviewFlag=!1},prescriptionTemSave(){this.$emit("templateSavePopOpen",this.prescriptionListByWeek.slice())}},mounted(){const e=this.$route.params,t=e.prescriptionListByWeek;if(this.prescriptionListByWeek=this.$store.state.prescription(0),void 0!==t)for(let a=0;a<t.length;a++){let e=1===t.length?0:t[a].weekNum-1;for(let r=0;r<t[a].treatmentList.length;r++)null!==t[a].treatmentList[r].id&&this.prescriptionListByWeek[e].treatmentList.map(((a,s)=>{a.dayNum===t[e].treatmentList[r].dayNum&&Object.assign(this.prescriptionListByWeek[e].treatmentList[s],t[e].treatmentList[r])}))}}},o=n,c=a(1001),l=(0,c.Z)(o,i,d,!1,null,null,null),m=l.exports,p=function(){var e=this,t=e._self._c;return t("section",{staticClass:"remedy__wrap box__shadow__01 vertical__scroll"},[e._m(0),t("div",{staticClass:"remedy__bottom"},[t("div",{staticClass:"title__wrap"},[t("h4",[e._v("카테고리")]),t("dl",[e._m(1),t("dd",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.allChecked,expression:"allChecked"}],staticClass:"custom__checkbox",attrs:{type:"checkbox",id:"checkbox01"},domProps:{checked:Array.isArray(e.allChecked)?e._i(e.allChecked,null)>-1:e.allChecked},on:{change:[function(t){var a=e.allChecked,r=t.target,s=!!r.checked;if(Array.isArray(a)){var i=null,d=e._i(a,i);r.checked?d<0&&(e.allChecked=a.concat([i])):d>-1&&(e.allChecked=a.slice(0,d).concat(a.slice(d+1)))}else e.allChecked=s},function(t){return e.categoryAllcheck(t)}]}})])])]),t("ul",{ref:"categoryList",staticClass:"category__list"},e._l(e.treatmentCategoryList,(function(a){return t("li",{key:a.index,staticClass:"f__medium",class:{on:e.selectedCategory.includes(a.codeName)},attrs:{"data-code":a.codeId},on:{click:function(t){return e.categoryClick(a.codeName)}}},[e._v(" "+e._s(a.codeName)+" ")])})),0)]),t("div",{staticClass:"remedy__list__wrap"},[t("div",{staticClass:"title__wrap"},[t("h4",[e._v("치료제")]),e.treatmentList.length>0?t("dl",[t("dt",[e._v("검색결과   :  ")]),t("dd",[e._v(e._s(e.treatmentList.length))])]):e._e()]),e.treatmentList.length>0?t("ul",{staticClass:"remedy__item__wrap"},e._l(e.treatmentList,(function(a){return t("li",{key:a.updatetime,staticClass:"box__shadow__03"},[t("dl",{attrs:{draggable:"true"},on:{dragstart:function(t){return e.startDrag(a)}}},[t("dt",[e._v(e._s(a.categoryName))]),t("dd",{staticClass:"f__medium"},[e._v(" "+e._s(a.name)+" ")])])])})),0):e._e()])])},u=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"remedy__top"},[t("h3",[e._v("치료제 조회")])])},function(){var e=this,t=e._self._c;return t("dt",[t("label",{attrs:{for:"checkbox01"}},[e._v("전체선택")])])}],g=(a(57658),JSON.parse('[{"codeName":"동기면담","codeId":"TACA001","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 18:04:46","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 18:04:46","codeDesc":"A-Stop 치료제 카테고리","mainCommCode":"TACA"},{"codeName":"질환교육","codeId":"TACA002","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 18:05:31","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 23:53:31","codeDesc":"A-Stop 치료제 카테고리","mainCommCode":"TACA"},{"codeName":"기능분석","codeId":"TACA003","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 18:05:53","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 18:05:53","codeDesc":"A-Stop 치료제 카테고리","mainCommCode":"TACA"},{"codeName":"목표설정","codeId":"TACA004","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 18:06:12","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 18:06:12","codeDesc":"A-Stop 치료제 카테고리","mainCommCode":"TACA"},{"codeName":"행동활성화","codeId":"TACA005","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 18:06:29","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 18:06:29","codeDesc":"A-Stop 치료제 카테고리","mainCommCode":"TACA"},{"codeName":"인지치료","codeId":"TACA006","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 18:06:47","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 18:06:47","codeDesc":"A-Stop 치료제 카테고리","mainCommCode":"TACA"},{"codeName":"동기강화부스터","codeId":"TACA007","useYn":"Y","registerId":"jk","registerName":"제이케이","createDate":"2022-06-27 18:07:09","updateId":"jk","updaterName":"제이케이","updateDate":"2022-06-27 18:07:09","codeDesc":"A-Stop 치료제 카테고리","mainCommCode":"TACA"}]')),_=a(45138),h={data(){return{itemObj:{},treatmentCategoryList:[],treatmentList:[],treatmentListBack:[],selectedCategory:[],allChecked:!1}},methods:{categoryAllcheck(e){this.selectedCategory=[],e.target.checked&&this.treatmentCategoryList.map((e=>{this.selectedCategory.push(e.codeName)})),this.treatmentFiltering()},treatmentFiltering(){this.treatmentList=this.treatmentListBack,this.treatmentList=this.treatmentList.filter((e=>this.selectedCategory.includes(e.categoryName)))},categoryClick(e){if(this.selectedCategory.includes(e))for(let t=0;t<this.selectedCategory.length;t++)this.selectedCategory[t]===e&&(this.selectedCategory.splice(t,1),t--);else this.selectedCategory.push(e);this.selectedCategory.length===this.treatmentCategoryList.length?this.allChecked=!0:this.allChecked=!1,this.treatmentFiltering()},startDrag(e){const t={};for(let a in e)t[a]=e[a];"development"==this.$env&&console.log(t),this.$emit("remedyStartDrag",t)},getTreatmentCategoryList(){this.treatmentCategoryList=g},getTreatments(){this.treatmentListBack=_,this.treatmentList.forEach(((e,t)=>{e.index=t+1}))}},mounted(){this.getTreatmentCategoryList(),this.getTreatments()}},C=h,y=(0,c.Z)(C,p,u,!1,null,null,null),v=y.exports,k=a(7684),N={data(){return{dragRemedyItem:"",savePopFlag:"Close",popupState:"등록",prescriptionListByWeek:[]}},components:{Prescription:m,Remedy:v,TemplateSavePopup:k.Z},methods:{remedyStartDrag(e){this.dragRemedyItem=e},templateSavePopClose(){this.savePopFlag="Close"},templateSavePopOpen(e){this.prescriptionListByWeek=e,this.savePopFlag="Open"}}},f=N,L=(0,c.Z)(f,r,s,!1,null,null,null),A=L.exports}}]);
//# sourceMappingURL=979.65c29a3e.js.map